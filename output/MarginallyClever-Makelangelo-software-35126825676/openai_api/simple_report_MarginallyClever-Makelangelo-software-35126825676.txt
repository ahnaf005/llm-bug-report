Title
- Tests failing in CI with java.lang.reflect.InaccessibleObjectException due to module encapsulation (JUnit/Surefire reflection). Patch adds opens clauses to module-info.java to allow test reflection.

Summary
- CI build failed (Maven surefire tests) with 22 errors (InaccessibleObjectException). The test runner (JUnit via Surefire) was unable to use reflection to construct or access test classes and static lifecycle methods because the module com.marginallyclever.makelangelo did not open several packages to the (unnamed) test runtime.
- A code change was made to module-info.java to add opens for the impacted packages. The patch shown in CODE DIFF is intended to fix the failures by allowing reflective access.

Environment
- OS: ubuntu-24.04 (GitHub Actions runner)
- Java: Temurin 17.0.13+11
- Maven: using maven-surefire-plugin:3.0.0-M5
- Failing commit: 5f7a8ca2218ba64fd6eb5be385cafc51dd5f866a
- Build command in CI: ./mvnw -B test -Djava.awt.headless=true

Reproduction steps
1. Checkout failing commit (5f7a8ca...).
2. Run: ./mvnw -B test -Djava.awt.headless=true
3. Observe test failures/errors.

Observed failure (excerpt)
- Maven summary:
  - Tests run: 140, Failures: 0, Errors: 22, Skipped: 1
  - BUILD FAILURE (maven-surefire-plugin)
- Representative error lines from the log:
  - java.lang.reflect.InaccessibleObjectException: Unable to make com.marginallyclever.makelangelo.turtle.TurtleTest() accessible: module com.marginallyclever.makelangelo does not "opens com.marginallyclever.makelangelo.turtle" to unnamed module @6f10d5b6
  - java.lang.reflect.InaccessibleObjectException: Unable to make public static void com.marginallyclever.makelangelo.makeart.io.SaveDXFTest.beforeAll() accessible: module com.marginallyclever.makelangelo does not "opens com.marginallyclever.makelangelo.makeart.io" to unnamed module @6f10d5b6
  - java.lang.reflect.InaccessibleObjectException: Unable to make com.marginallyclever.convenience.FileAccessTest() accessible: module com.marginallyclever.makelangelo does not "opens com.marginallyclever.convenience" to unnamed module @6f10d5b6
- Full list of tests that produced InaccessibleObjectException (from log):
  - com.marginallyclever.makelangelo.turtle.TurtleTest (many test methods)
  - com.marginallyclever.makelangelo.makeart.io.SaveDXFTest
  - com.marginallyclever.makelangelo.makeart.io.SaveGCodeTest
  - com.marginallyclever.makelangelo.makeart.io.SaveSVGTest
  - com.marginallyclever.convenience.FileAccessTest
  - (Total 22 errors reported in Results section)

Root cause analysis
- Java Platform Module System (JPMS) in Java 9+ enforces strong encapsulation. By default, packages in a named module are not accessible for deep reflection by code in other modules or the unnamed module (test framework) unless the module declares them as opened or exported appropriately.
- JUnit (and Surefire/JUnit engine) uses reflection to instantiate test classes and call lifecycle methods (e.g., @BeforeAll static methods). When tests run on the module path, those reflections are subject to module access rules.
- The error messages explicitly state packages were not opened (e.g., "does not 'opens com.marginallyclever.makelangelo.turtle' to unnamed module"). Therefore these packages must be opened in module-info.java to permit reflective access during tests.
- The provided CODE DIFF adds opens statements for the necessary packages; this is the correct fix approach for allowing reflective access from the test runtime (unnamed module).

Patch applied (from CODE DIFF)
- File modified: src/main/java/module-info.java
- Added lines (opens package statements):
  - opens com.marginallyclever.convenience;
  - opens com.marginallyclever.convenience.voronoi;
  - opens com.marginallyclever.makelangelo.makeart.io;
  - opens com.marginallyclever.makelangelo.plotter.plottercontrols;
  - opens com.marginallyclever.makelangelo.turtle;
  - opens com.marginallyclever.convenience.noise;
  - opens com.marginallyclever.convenience.helpers;

Patch content (exact)
--- a/src/main/java/module-info.java
+++ b/src/main/java/module-info.java
@@ -20,4 +20,12 @@
     requires org.locationtech.jts;
     requires org.apache.httpcomponents.httpclient;
     requires org.apache.httpcomponents.httpcore;

+    opens com.marginallyclever.convenience;
+    opens com.marginallyclever.convenience.voronoi;
+    opens com.marginallyclever.makelangelo.makeart.io;
+    opens com.marginallyclever.makelangelo.plotter.plottercontrols;
+    opens com.marginallyclever.makelangelo.turtle;
+    opens com.marginallyclever.convenience.noise;
+    opens com.marginallyclever.convenience.helpers;
 }
\ No newline at end of file

Mapping: failing packages → added opens
- com.marginallyclever.makelangelo.turtle → opens com.marginallyclever.makelangelo.turtle;
- com.marginallyclever.makelangelo.makeart.io → opens com.marginallyclever.makelangelo.makeart.io;
- com.marginallyclever.convenience → opens com.marginallyclever.convenience;
- com.marginallyclever.convenience.helpers → opens com.marginallyclever.convenience.helpers;
- com.marginallyclever.makelangelo.plotter.plottercontrols → opens com.marginallyclever.makelangelo.plotter.plottercontrols;
- Additional convenience subpackages (noise, voronoi) added proactively.

Verification steps (recommended)
1. Pull the branch/commit that contains the module-info.java modification (the CODE DIFF).
2. Run locally: ./mvnw -B test -Djava.awt.headless=true
3. Confirm tests that previously error now execute (the InaccessibleObjectException errors are gone).
4. Re-run CI to validate the fix in the same environment (GitHub Actions ubuntu-24.04, Java 17).
5. If any other packages produce similar InaccessibleObjectException, add corresponding opens entries.

Alternative/Notes and suggested improvements
- Limiting scope: The patch uses plain opens (opens <package>;), which opens packages to all modules at runtime. For tighter control, consider opening only to the test/JUnit modules:
  - Example: opens com.foo.bar to org.junit.platform.commons; (module names depend on JUnit/JUnit platform modules in use).
  - However, in many CI setups the tests run in the unnamed module, so opens to unnamed module is required and specifying a specific target module may not work. Plain opens is simplest and reliable for tests.
- Review for production risk: Opening packages relaxes encapsulation. If you want to preserve stricter encapsulation in production, you can:
  - Use test-specific module-info (not typically done), or
  - Configure surefire to run tests on the classpath instead of module path, or
  - Add explicit "opens ... to <test-engine-module>" if you can guarantee which named modules run tests.
- Add a comment in module-info.java explaining why opens declarations exist (to allow reflective access for unit tests) to avoid accidental removal in future changes.
- Add CI check (or a unit test that runs in a JDK 17+ environment) to detect this class of regression early if module-info is modified.

Risk/Impact
- Immediate impact: Fixes 22 test errors and removes module reflection failures. Tests that rely on reflection will be able to run.
- Security/encapsulation: Using opens relaxes module encapsulation for the opened packages; consider whether any of these packages expose sensitive internals. For typical test-only reflection, this is acceptable.
- Regressions: Ensure no other packages require opening. If new tests introduce reflective access to other packages, similar errors will surface.

Next steps
1. Merge the module-info.java change (or equivalent) into the branch/PR.
2. Re-run CI and confirm tests pass.
3. If CI still shows InaccessibleObjectException for other packages, add them to module-info.java opens.
4. Optionally narrow opens to specific test engine modules if feasible.

Appendix: Relevant log excerpts
- Example failing message:
  - java.lang.reflect.InaccessibleObjectException: Unable to make com.marginallyclever.makelangelo.turtle.TurtleTest() accessible: module com.marginallyclever.makelangelo does not "opens com.marginallyclever.makelangelo.turtle" to unnamed module @6f10d5b6
- Summary failure:
  - [ERROR] Tests run: 140, Failures: 0, Errors: 22, Skipped: 1
  - [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M5:test (default-test) on project Makelangelo: There are test failures.

If you want, I can:
- Create a minimal patch that opens only the exact packages that failed (list them).
- Suggest a narrowed opens "to" clause (if you can provide exact JUnit module names used in your environment).
- Run through a checklist to ensure no other module-info changes are necessary (e.g., exports vs opens).